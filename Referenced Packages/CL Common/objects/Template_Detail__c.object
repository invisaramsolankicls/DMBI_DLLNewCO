<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <deprecated>false</deprecated>
    <enableActivities>false</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>false</enableHistory>
    <enableReports>false</enableReports>
    <enableSearch>false</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <externalSharingModel>ControlledByParent</externalSharingModel>
    <fields>
        <fullName>Alias__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Alias</label>
        <length>100</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Chart_of_Account__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Chart of Account</label>
        <referenceTo>Chart_Of_Account__c</referenceTo>
        <relationshipName>Template_Details</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Detail__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <deprecated>false</deprecated>
        <description>Change in Cash Flow for which template detail needs to be recorded</description>
        <externalId>false</externalId>
        <label>Detail</label>
        <lookupFilter>
            <active>true</active>
            <errorMessage>Details of same template can be selected</errorMessage>
            <filterItems>
                <field>Template_Detail__c.Template__c</field>
                <operation>equals</operation>
                <valueField>$Source.Template__c</valueField>
            </filterItems>
            <infoMessage>Details of same template can be selected</infoMessage>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>Template_Detail__c</referenceTo>
        <relationshipLabel>Template Details</relationshipLabel>
        <relationshipName>Template_Details</relationshipName>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>Duplicate_Key__c</fullName>
        <caseSensitive>false</caseSensitive>
        <deprecated>false</deprecated>
        <description>Internal use only. This key is used to uniquely identify aliases for a given template. The value is equal to alias value, if alias is not null.</description>
        <externalId>false</externalId>
        <inlineHelpText>Internal use only. This key is used to uniquely identify aliases for a given template. The value is equal to alias value, if alias is not null.</inlineHelpText>
        <label>Duplicate Key</label>
        <length>255</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>true</unique>
    </fields>
    <fields>
        <fullName>Expression__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Expression</label>
        <length>131072</length>
        <trackTrending>false</trackTrending>
        <type>LongTextArea</type>
        <visibleLines>5</visibleLines>
    </fields>
    <fields>
        <fullName>Level__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Level</label>
        <length>255</length>
        <required>false</required>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>Statement_Type__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Statement Type</label>
        <required>true</required>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>INCOME</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>BALANCESHEET</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>CASHFLOW</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>RATIO</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>Template__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Template</label>
        <referenceTo>Financial_Statement_Template__c</referenceTo>
        <relationshipLabel>Template Details</relationshipLabel>
        <relationshipName>Template</relationshipName>
        <relationshipOrder>0</relationshipOrder>
        <reparentableMasterDetail>true</reparentableMasterDetail>
        <trackTrending>false</trackTrending>
        <type>MasterDetail</type>
        <writeRequiresMasterRead>false</writeRequiresMasterRead>
    </fields>
    <fields>
        <fullName>Type__c</fullName>
        <deprecated>false</deprecated>
        <externalId>false</externalId>
        <label>Type</label>
        <required>true</required>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>HEADER</fullName>
                    <default>true</default>
                </value>
                <value>
                    <fullName>INPUT</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>ROLLUP</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>COMPUTE</fullName>
                    <default>false</default>
                </value>
                <value>
                    <fullName>PRESENTMINUSPREV</fullName>
                    <default>false</default>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <label>Template Detail</label>
    <nameField>
        <label>Template Detail Name</label>
        <type>Text</type>
    </nameField>
    <pluralLabel>Template Details</pluralLabel>
    <searchLayouts/>
    <sharingModel>ControlledByParent</sharingModel>
    <validationRules>
        <fullName>Alias_Alphanumeric</fullName>
        <active>true</active>
        <description>Alias must be alphanumeric and without spaces</description>
        <errorConditionFormula>AND(
    NOT(ISBLANK(Alias__c)),
    NOT(REGEX(Alias__c,&apos;[a-zA-Z0-9]+&apos;))
)</errorConditionFormula>
        <errorMessage>Alias must be alphanumeric and without spaces</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Circular_Dependency</fullName>
        <active>true</active>
        <errorConditionFormula>AND(
    ISPICKVAL(Type__c,&apos;INPUT&apos;),
    NOT(ISBLANK(Detail__c)), 
    NOT(ISBLANK(Detail__r.Detail__c)),
    Id  =  Detail__r.Detail__c 
)</errorConditionFormula>
        <errorMessage>This will introduce circular dependency</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Type_Compute</fullName>
        <active>true</active>
        <description>Record with Type = COMPUTE must define an expression.</description>
        <errorConditionFormula>AND(
    ISPICKVAL(Type__c,&apos;COMPUTE&apos;),
    OR(
       ISBLANK(Expression__c),
       NOT(ISBLANK(Chart_of_Account__c)),
       NOT(ISBLANK(Detail__c))
    )   
)</errorConditionFormula>
        <errorMessage>Record with type = COMPUTE must have an expression. Chart of Account or Detail must be blank</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Type_Difference</fullName>
        <active>true</active>
        <description>Record with Type = DIFFERENCE must have detail value</description>
        <errorConditionFormula>AND(
    ISPICKVAL(Type__c,&apos;PRESENTMINUSPREV&apos;),
    OR(
       ISBLANK(Detail__c),
       NOT(ISBLANK(Chart_of_Account__c)),
       NOT(ISBLANK(Expression__c))
    )   
)</errorConditionFormula>
        <errorMessage>Record with type = DIFFERENCE must have detail value. Chart of Account or Expression must be blank</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Type_Header</fullName>
        <active>true</active>
        <description>Header record cannot have Chart of account or Detail associated with it</description>
        <errorConditionFormula>AND(
    ISPICKVAL(Type__c,&apos;HEADER&apos;),
    OR(
       NOT(ISBLANK(Detail__c)),
       NOT(ISBLANK(Chart_of_Account__c)),
       NOT(ISBLANK(Expression__c)),
       NOT(ISBLANK(Alias__c))
    ) 
)</errorConditionFormula>
        <errorMessage>Record with type = HEADER must have blank Alias, Chart of Account , Detail or Expression</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Type_Input</fullName>
        <active>true</active>
        <description>Record with Type = INPUT can either have Chart of Account or Detail associated with it</description>
        <errorConditionFormula>AND(
    ISPICKVAL(Type__c,&apos;INPUT&apos;), 
    OR(
       NOT(ISBLANK(Expression__c)),    
       AND(
           NOT(ISBLANK(Detail__c)),
           NOT(ISBLANK(Chart_of_Account__c))
       )
    ) 
)</errorConditionFormula>
        <errorMessage>Record with type = INPUT can be either associated with a Chart of Account record or Detail record. Expression must be blank.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Type_Rollup</fullName>
        <active>true</active>
        <description>ROLLUP record must have Chart of Account only</description>
        <errorConditionFormula>AND(
    ISPICKVAL(Type__c,&apos;ROLLUP&apos;),
    OR(
       ISBLANK(Chart_of_Account__c),
       NOT(ISBLANK(Detail__c)),
       NOT(ISBLANK(Expression__c))
    ) 
)</errorConditionFormula>
        <errorMessage>Record with type = ROLLUP must be associated with Chart of Account record. Detail or Expression must be blank</errorMessage>
    </validationRules>
</CustomObject>
